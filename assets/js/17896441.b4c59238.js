"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[8401],{19561:(e,t,a)=>{a.d(t,{A:()=>A});var s=a(96540),n=a(34164),o=a(86682),i=a(17081),r=a(81130),c=a(15833),l=a(55730),d=a(91386),h=a(27521),u=a(91990),m=a(38294),f=a(57519),p=a(28467);const b={docItemContainer:"docItemContainer_c0TR",docItemCol:"docItemCol_z5aJ",feedbackContainer:"feedbackContainer_C8Ks",feedbackPrompt:"feedbackPrompt_UaEh",feedbackButtons:"feedbackButtons_X7j4",feedbackButton:"feedbackButton_ht6A",thumbsUp:"thumbsUp_trTO",thumbsDown:"thumbsDown_spKh",feedbackIcon:"feedbackIcon_WuR3",thankYouMessage:"thankYouMessage_dh1N",fadeIn:"fadeIn_JNKh",feedbackSuccess:"feedbackSuccess_mUak",veraxLinks:"veraxLinks_Y7nt",veraxLink:"veraxLink_e1xh",loadingIndicator:"loadingIndicator_oi1c",errorMessage:"errorMessage_ZFST",feedbackHeader:"feedbackHeader_jIPN",tooltipContainer:"tooltipContainer_xRqa",tooltipTrigger:"tooltipTrigger_iihd",infoIcon:"infoIcon_Z2mR",whatIsThis:"whatIsThis_I1X8",tooltipContent:"tooltipContent_rMJZ","fade-in":"fade-in_eJfq"};var x=a(56347),k=a(52362),g=a(74848);function j(){return(0,x.zy)().pathname.includes("/tooling")?(0,g.jsx)("div",{style:{marginTop:"2rem"},children:(0,g.jsxs)(k.A,{type:"info",title:"Want to be featured here?",children:["Have you built a tool for Linea? Contribute to the docs to add it here! See our"," ",(0,g.jsxs)("a",{href:"https://github.com/Consensys/doc.linea?tab=readme-ov-file#contribute",children:[" ","guide to contributing"]}),"."]})}):null}function w(){return(0,x.zy)().pathname.includes("/api/linea-smart-contracts")?(0,g.jsx)("div",{style:{marginTop:"2rem"},children:(0,g.jsxs)(k.A,{type:"warning",title:"Contributions not accepted",children:["These reference pages are automatically generated based on Linea's"," ",(0,g.jsx)("a",{href:"https://github.com/Consensys/linea-monorepo/tree/main/contracts/src",children:"smart contracts"}),". To ensure they accurately match the deployed smart contracts, we cannot accept any contributions that edit these pages."]})}):null}var v=a(8532),y=a(73622),I=a(54433),C=a(16954);const _="0x598440d1c9B3302ECaD9Cb3945717Ef2EC632746",M="0xb3cb018b837f70fa9cbb59bcfc59049fb529151399345845bae3d380b81c4120",N=["function attest(tuple(bytes32 schemaId, uint64 expirationDate, bytes subject, bytes attestationData) attestationPayload, bytes[] validationPayload) public payable"],S=e=>{let{text:t}=e;const[a,n]=(0,s.useState)(!1);return(0,g.jsxs)("div",{className:b.tooltipContainer,children:[(0,g.jsxs)("div",{className:b.tooltipTrigger,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!a),children:[(0,g.jsx)("span",{className:b.infoIcon,children:"\u24d8"}),(0,g.jsx)("span",{className:b.whatIsThis,children:"What is this?"})]}),a&&(0,g.jsx)("div",{className:b.tooltipContent,children:t})]})},T=()=>{const{colorMode:e}=(0,v.G)(),[t,a]=(0,s.useState)(e),[n,o]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),[d,h]=(0,s.useState)(""),[u,m]=(0,s.useState)(null),[f,p]=(0,s.useState)(null),{metaMaskAccount:x,metaMaskWalletIdConnectHandler:k,metaMaskProvider:j,sdk:w}=(0,s.useContext)(C.y);(0,s.useEffect)((()=>{a(e)}),[e]),(0,s.useEffect)((()=>{"undefined"!=typeof window&&h(window.location.href)}),[]);const T=async e=>{if(console.log(`Preparing to submit ${e?"positive":"negative"} feedback for ${d}`),!x)return console.log("No wallet connected. Opening MetaMask..."),void k();r(!0),l(null),m(null),p(null);try{console.log("Connected wallet address:",x);const a=j;if(!a)throw new Error("MetaMask provider not available");console.log("Getting chain ID...");const s=await a.request({method:"eth_chainId"}),n=parseInt(s,16);if(console.log("Current chain ID:",n),59144!==n){console.log("Switching to Linea Mainnet...");try{await a.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xe708"}]})}catch(t){if(4902!==t.code)throw t;await a.request({method:"wallet_addEthereumChain",params:[{chainId:"0xe708",chainName:"Linea Mainnet",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://rpc.linea.build"],blockExplorerUrls:["https://lineascan.build/"]}]})}}const i=new y.KA(N),r=new I.y,c=r.encode(["bool","string","address"],[e,d,x]),l=r.encode(["address"],[x]),h={schemaId:M,expirationDate:0,subject:l,attestationData:c},u=i.encodeFunctionData("attest",[h,[]]);console.log("Getting gas price...");const f=await a.request({method:"eth_gasPrice"}),b=parseInt(f,16),k=Math.floor(1.2*b).toString(16);console.log("Gas price:",f,"With premium:","0x"+k),console.log("Estimating gas...");const g=await a.request({method:"eth_estimateGas",params:[{to:_,from:x,data:u}]}),w=parseInt(g,16),v=Math.floor(1.2*w).toString(16);console.log("Gas estimate:",g,"With buffer:","0x"+v);const C={chainId:n,address:x,portalAddress:_,schemaId:M,gasPrice:parseInt(f,16),gasPriceWithPremium:parseInt("0x"+k,16),gasEstimate:parseInt(g,16),gasEstimateWithBuffer:parseInt("0x"+v,16)};console.log("Debug data:",C),m(C);const S={to:_,from:x,data:u,chainId:"0xe708",gasPrice:"0x"+k,gas:"0x"+v};console.log("Transaction parameters:",S),console.log("Sending transaction...");const T=await a.request({method:"eth_sendTransaction",params:[S]});console.log("Transaction sent! Hash:",T),p(T),o(!0)}catch(c){console.error("Error submitting feedback:",c),l(`Failed to submit feedback: ${c.message}`)}finally{r(!1)}};return(0,g.jsxs)("div",{className:b.feedbackContainer,children:[(0,g.jsx)("div",{className:b.feedbackPrompt,children:n?(0,g.jsxs)("div",{className:b.feedbackSuccess,children:[(0,g.jsx)("div",{className:b.thankYouMessage,children:"Thank you for your feedback!"}),(0,g.jsxs)("div",{className:b.veraxLinks,children:[(0,g.jsx)("a",{href:"https://explorer.ver.ax/linea/schemas/0xb3cb018b837f70fa9cbb59bcfc59049fb529151399345845bae3d380b81c4120",target:"_blank",rel:"noopener noreferrer",className:b.veraxLink,children:"View all feedback on the Verax explorer"}),f&&(0,g.jsx)("a",{href:`https://lineascan.build/tx/${f}`,target:"_blank",rel:"noopener noreferrer",className:b.veraxLink,children:"View your transaction on LineaScan"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:b.feedbackHeader,children:(0,g.jsx)("span",{children:"Was this page helpful?"})}),(0,g.jsxs)("div",{className:b.feedbackButtons,children:[(0,g.jsx)("button",{className:`${b.feedbackButton} ${b.thumbsUp}`,onClick:()=>T(!0),disabled:i,"aria-label":"Thumbs up",children:(0,g.jsx)("span",{className:b.feedbackIcon,children:(0,g.jsxs)("svg",{id:"Layer_2","data-name":"Layer 2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 83.74 83.74",children:[(0,g.jsx)("path",{d:"M41.87,83.74c23.12,0,41.87-18.746,41.87-41.87S64.99,0,41.87,0,0,18.746,0,41.87s18.75,41.87,41.87,41.87Z",fill:"#fff068"}),(0,g.jsx)("path",{d:"M41.87,51.875c5.53,0,10-4.477,10-10s-4.47-10-10-10-10,4.477-10,10,4.48,10,10,10Z",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M37.87,43.875s1.5,2,4,2,4-2,4-2",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M38.87,38.875h.01",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M44.87,38.875h.01",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})]})})}),(0,g.jsx)("button",{className:`${b.feedbackButton} ${b.thumbsDown}`,onClick:()=>T(!1),disabled:i,"aria-label":"Thumbs down",children:(0,g.jsx)("span",{className:b.feedbackIcon,children:(0,g.jsxs)("svg",{id:"Layer_2","data-name":"Layer 2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 83.74 83.74",children:[(0,g.jsx)("path",{d:"M41.87,83.74c23.12,0,41.87-18.746,41.87-41.87S64.99,0,41.87,0,0,18.746,0,41.87s18.75,41.87,41.87,41.87Z",fill:"#ff8d4c"}),(0,g.jsx)("path",{d:"M41.87,51.875c5.53,0,10-4.477,10-10s-4.47-10-10-10-10,4.477-10,10,4.48,10,10,10Z",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M45.87,45.495s-1.5-2-4-2-4,2-4,2",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M38.87,38.875h.01",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),(0,g.jsx)("path",{d:"M44.87,38.875h.01",fill:"none",stroke:"#121212","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})]})})})]}),(0,g.jsx)(S,{text:"This is a trial feedback system that uses Verax to record your feedback as onchain attestations on Linea Mainnet. When you vote, submit a transaction in your wallet."})]})}),i&&(0,g.jsx)("div",{className:b.loadingIndicator,children:"Submitting feedback..."}),c&&(0,g.jsxs)("div",{className:b.errorMessage,children:[c,!x&&(0,g.jsx)("button",{onClick:k,className:b.connectButton,style:{marginLeft:"10px",padding:"4px 8px",fontSize:"0.8rem"},children:"Connect MetaMask"})]}),x&&(0,g.jsxs)("div",{className:b.walletInfo,style:{fontSize:"0.7rem",marginTop:"0.5rem",color:"var(--ifm-color-emphasis-600)"},children:["Connected: ",x.substring(0,6),"...",x.substring(38)]}),u&&(0,g.jsx)("div",{className:b.debugInfo,style:{fontSize:"0.8rem",marginTop:"1rem",color:"var(--ifm-color-emphasis-600)",textAlign:"left"},children:(0,g.jsxs)("details",{children:[(0,g.jsx)("summary",{children:"Debug Information"}),(0,g.jsx)("pre",{children:JSON.stringify(u,null,2)})]})})]})};function A(e){let{children:t}=e;const a=function(){const{frontMatter:e,toc:t}=(0,i.u)(),a=(0,o.l)(),s=e.hide_table_of_contents,n=!s&&t.length>0;return{hidden:s,mobile:n?(0,g.jsx)(h.A,{}):void 0,desktop:!n||"desktop"!==a&&"ssr"!==a?void 0:(0,g.jsx)(u.A,{})}}(),{metadata:s}=(0,i.u)();return(0,g.jsxs)("div",{className:"row",children:[(0,g.jsxs)("div",{className:(0,n.A)("col",!a.hidden&&b.docItemCol),children:[(0,g.jsx)(p.A,{metadata:s}),(0,g.jsx)(c.A,{}),(0,g.jsxs)("div",{className:b.docItemContainer,children:[(0,g.jsxs)("article",{children:[(0,g.jsx)(f.A,{}),(0,g.jsx)(l.A,{}),a.mobile,(0,g.jsx)(m.A,{children:t}),(0,g.jsx)(j,{}),(0,g.jsx)(w,{}),(0,g.jsx)(T,{}),(0,g.jsx)(d.A,{})]}),(0,g.jsx)(r.A,{})]})]}),a.desktop&&(0,g.jsx)("div",{className:"col col--3",children:a.desktop})]})}},57660:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});a(96540);var s=a(55920),n=a(27143),o=a(74848);const i=function(e){const{content:t}=e,{metadata:a}=t,{image:i}=a,r=i?`${i}`:void 0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.A,{children:r&&(0,o.jsx)("meta",{property:"og:image",content:r})}),(0,o.jsx)(s.A,{...e})]})}}}]);