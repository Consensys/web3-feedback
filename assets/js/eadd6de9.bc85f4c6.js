"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[4717],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var r=s(96540);const d={},t=r.createContext(d);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},49261:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"api/linea-smart-contracts/tokenbridge/tokenbridge","title":"TokenBridge","description":"Contract to manage cross-chain ERC20 bridging.","source":"@site/docs/api/linea-smart-contracts/tokenbridge/tokenbridge.mdx","sourceDirName":"api/linea-smart-contracts/tokenbridge","slug":"/api/linea-smart-contracts/tokenbridge/","permalink":"/web3-feedback/api/linea-smart-contracts/tokenbridge/","draft":false,"unlisted":false,"editUrl":"https://github.com/Consensys/doc.linea/tree/main/docs/api/linea-smart-contracts/tokenbridge/tokenbridge.mdx","tags":[],"version":"current","lastUpdatedBy":"Joel Willmore","lastUpdatedAt":1746010655000,"frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"BridgedToken","permalink":"/web3-feedback/api/linea-smart-contracts/tokenbridge/bridgedtoken"},"next":{"title":"ITokenBridge","permalink":"/web3-feedback/api/linea-smart-contracts/tokenbridge/interfaces/itokenbridge"}}');var d=s(74848),t=s(28453);const i={},a="TokenBridge",l={},c=[{value:"CONTRACT_VERSION",id:"contract_version",level:3},{value:"SET_MESSAGE_SERVICE_ROLE",id:"set_message_service_role",level:3},{value:"SET_REMOTE_TOKENBRIDGE_ROLE",id:"set_remote_tokenbridge_role",level:3},{value:"SET_RESERVED_TOKEN_ROLE",id:"set_reserved_token_role",level:3},{value:"REMOVE_RESERVED_TOKEN_ROLE",id:"remove_reserved_token_role",level:3},{value:"SET_CUSTOM_CONTRACT_ROLE",id:"set_custom_contract_role",level:3},{value:"EMPTY",id:"empty",level:3},{value:"RESERVED_STATUS",id:"reserved_status",level:3},{value:"NATIVE_STATUS",id:"native_status",level:3},{value:"DEPLOYED_STATUS",id:"deployed_status",level:3},{value:"_PERMIT_SELECTOR",id:"_permit_selector",level:3},{value:"tokenBeacon",id:"tokenbeacon",level:3},{value:"nativeToBridgedToken",id:"nativetobridgedtoken",level:3},{value:"bridgedToNativeToken",id:"bridgedtonativetoken",level:3},{value:"sourceChainId",id:"sourcechainid",level:3},{value:"targetChainId",id:"targetchainid",level:3},{value:"isNewToken",id:"isnewtoken",level:3},{value:"nonZeroAddress",id:"nonzeroaddress",level:3},{value:"Parameters",id:"parameters",level:4},{value:"nonZeroAmount",id:"nonzeroamount",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"constructor",id:"constructor",level:3},{value:"initialize",id:"initialize",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"reinitializePauseTypesAndPermissions",id:"reinitializepausetypesandpermissions",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"bridgeToken",id:"bridgetoken",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"bridgeTokenWithPermit",id:"bridgetokenwithpermit",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"completeBridging",id:"completebridging",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"setMessageService",id:"setmessageservice",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"confirmDeployment",id:"confirmdeployment",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"setDeployed",id:"setdeployed",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"setRemoteTokenBridge",id:"setremotetokenbridge",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"deployBridgedToken",id:"deploybridgedtoken",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"Return Values",id:"return-values",level:4},{value:"setReserved",id:"setreserved",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"removeReserved",id:"removereserved",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"setCustomContract",id:"setcustomcontract",level:3},{value:"Parameters",id:"parameters-14",level:4},{value:"_safeName",id:"_safename",level:3},{value:"Parameters",id:"parameters-15",level:4},{value:"Return Values",id:"return-values-1",level:4},{value:"_safeSymbol",id:"_safesymbol",level:3},{value:"Parameters",id:"parameters-16",level:4},{value:"Return Values",id:"return-values-2",level:4},{value:"_safeDecimals",id:"_safedecimals",level:3},{value:"Parameters",id:"parameters-17",level:4},{value:"Return Values",id:"return-values-3",level:4},{value:"_returnDataToString",id:"_returndatatostring",level:3},{value:"Parameters",id:"parameters-18",level:4},{value:"Return Values",id:"return-values-4",level:4},{value:"_permit",id:"_permit",level:3},{value:"Parameters",id:"parameters-19",level:4}];function h(e){const n={code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"tokenbridge",children:(0,d.jsx)(n.code,{children:"TokenBridge"})})}),"\n",(0,d.jsx)(n.p,{children:"Contract to manage cross-chain ERC20 bridging."}),"\n",(0,d.jsx)(n.h3,{id:"contract_version",children:"CONTRACT_VERSION"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"string CONTRACT_VERSION\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"This is the ABI version and not the reinitialize version."})}),"\n",(0,d.jsx)(n.h3,{id:"set_message_service_role",children:"SET_MESSAGE_SERVICE_ROLE"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes32 SET_MESSAGE_SERVICE_ROLE\n"})}),"\n",(0,d.jsx)(n.p,{children:"Role used for setting the message service address."}),"\n",(0,d.jsx)(n.h3,{id:"set_remote_tokenbridge_role",children:"SET_REMOTE_TOKENBRIDGE_ROLE"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes32 SET_REMOTE_TOKENBRIDGE_ROLE\n"})}),"\n",(0,d.jsx)(n.p,{children:"Role used for setting the remote token bridge address."}),"\n",(0,d.jsx)(n.h3,{id:"set_reserved_token_role",children:"SET_RESERVED_TOKEN_ROLE"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes32 SET_RESERVED_TOKEN_ROLE\n"})}),"\n",(0,d.jsx)(n.p,{children:"Role used for setting a reserved token address."}),"\n",(0,d.jsx)(n.h3,{id:"remove_reserved_token_role",children:"REMOVE_RESERVED_TOKEN_ROLE"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes32 REMOVE_RESERVED_TOKEN_ROLE\n"})}),"\n",(0,d.jsx)(n.p,{children:"Role used for removing a reserved token address."}),"\n",(0,d.jsx)(n.h3,{id:"set_custom_contract_role",children:"SET_CUSTOM_CONTRACT_ROLE"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes32 SET_CUSTOM_CONTRACT_ROLE\n"})}),"\n",(0,d.jsx)(n.p,{children:"Role used for setting a custom token contract address."}),"\n",(0,d.jsx)(n.h3,{id:"empty",children:"EMPTY"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"address EMPTY\n"})}),"\n",(0,d.jsx)(n.p,{children:"EMPTY means a token is not present in the mapping."}),"\n",(0,d.jsx)(n.h3,{id:"reserved_status",children:"RESERVED_STATUS"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"address RESERVED_STATUS\n"})}),"\n",(0,d.jsx)(n.p,{children:"RESERVED means a token is reserved and cannot be bridged."}),"\n",(0,d.jsx)(n.h3,{id:"native_status",children:"NATIVE_STATUS"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"address NATIVE_STATUS\n"})}),"\n",(0,d.jsx)(n.p,{children:"NATIVE means a token is native to the current local chain."}),"\n",(0,d.jsx)(n.h3,{id:"deployed_status",children:"DEPLOYED_STATUS"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"address DEPLOYED_STATUS\n"})}),"\n",(0,d.jsx)(n.p,{children:"DEPLOYED means the bridged token contract has been deployed on the remote chain."}),"\n",(0,d.jsx)(n.h3,{id:"_permit_selector",children:"_PERMIT_SELECTOR"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"bytes4 _PERMIT_SELECTOR\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"The permit selector to be used when decoding the permit."})}),"\n",(0,d.jsx)(n.h3,{id:"tokenbeacon",children:"tokenBeacon"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"address tokenBeacon\n"})}),"\n",(0,d.jsx)(n.p,{children:"The token beacon for deployed tokens."}),"\n",(0,d.jsx)(n.h3,{id:"nativetobridgedtoken",children:"nativeToBridgedToken"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"mapping(uint256 => mapping(address => address)) nativeToBridgedToken\n"})}),"\n",(0,d.jsx)(n.p,{children:"The chainId mapped to a native token address which is then mapped to the bridged token address."}),"\n",(0,d.jsx)(n.h3,{id:"bridgedtonativetoken",children:"bridgedToNativeToken"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"mapping(address => address) bridgedToNativeToken\n"})}),"\n",(0,d.jsx)(n.p,{children:"The bridged token address mapped to the native token address."}),"\n",(0,d.jsx)(n.h3,{id:"sourcechainid",children:"sourceChainId"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"uint256 sourceChainId\n"})}),"\n",(0,d.jsx)(n.p,{children:"The current layer's chainId from where the bridging is triggered."}),"\n",(0,d.jsx)(n.h3,{id:"targetchainid",children:"targetChainId"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"uint256 targetChainId\n"})}),"\n",(0,d.jsx)(n.p,{children:"The targeted layer's chainId where the bridging is received."}),"\n",(0,d.jsx)(n.h3,{id:"isnewtoken",children:"isNewToken"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"modifier isNewToken(address _token)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Ensures the token has not been bridged before."})}),"\n",(0,d.jsx)(n.h3,{id:"nonzeroaddress",children:"nonZeroAddress"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"modifier nonZeroAddress(address _addr)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Ensures the address is not address(0)."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_addr"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"Address to check."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"nonzeroamount",children:"nonZeroAmount"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"modifier nonZeroAmount(uint256 _amount)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Ensures the amount is not 0."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_amount"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"amount to check."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"constructor",children:"constructor"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"constructor() public\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Disable constructor for safety"})}),"\n",(0,d.jsx)(n.h3,{id:"initialize",children:"initialize"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function initialize(struct ITokenBridge.InitializationData _initializationData) external\n"})}),"\n",(0,d.jsx)(n.p,{children:"Initializes TokenBridge and underlying service dependencies - used for new networks only."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Contract will be used as proxy implementation."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_initializationData"}),(0,d.jsx)(n.td,{children:"struct ITokenBridge.InitializationData"}),(0,d.jsx)(n.td,{children:"The initial data used for initializing the TokenBridge contract."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"reinitializepausetypesandpermissions",children:"reinitializePauseTypesAndPermissions"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function reinitializePauseTypesAndPermissions(address _defaultAdmin, struct IPermissionsManager.RoleAddress[] _roleAddresses, struct IPauseManager.PauseTypeRole[] _pauseTypeRoles, struct IPauseManager.PauseTypeRole[] _unpauseTypeRoles) external\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Sets permissions for a list of addresses and their roles as well as initialises the PauseManager pauseType",":role"," mappings."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"This function is a reinitializer and can only be called once per version. Should be called using an upgradeAndCall transaction to the ProxyAdmin."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_defaultAdmin"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The default admin account's address."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_roleAddresses"}),(0,d.jsx)(n.td,{children:"struct IPermissionsManager.RoleAddress[]"}),(0,d.jsx)(n.td,{children:"The list of addresses and roles to assign permissions to."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_pauseTypeRoles"}),(0,d.jsx)(n.td,{children:"struct IPauseManager.PauseTypeRole[]"}),(0,d.jsx)(n.td,{children:"The list of pause types to associate with roles."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_unpauseTypeRoles"}),(0,d.jsx)(n.td,{children:"struct IPauseManager.PauseTypeRole[]"}),(0,d.jsx)(n.td,{children:"The list of unpause types to associate with roles."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"bridgetoken",children:"bridgeToken"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function bridgeToken(address _token, uint256 _amount, address _recipient) public payable\n"})}),"\n",(0,d.jsx)(n.p,{children:"This function is the single entry point to bridge tokens to the\nother chain, both for native and already bridged tokens. You can use it\nto bridge any ERC20. If the token is bridged for the first time an ERC20\n(BridgedToken.sol) will be automatically deployed on the target chain."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"User should first allow the bridge to transfer tokens on his behalf.\nAlternatively, you can use BridgeTokenWithPermit to do so in a single\ntransaction. If you want the transfer to be automatically executed on the\ndestination chain. You should send enough ETH to pay the postman fees.\nNote that Linea can reserve some tokens (which use a dedicated bridge).\nIn this case, the token cannot be bridged. Linea can only reserve tokens\nthat have not been bridged yet.\nLinea can pause the bridge for security reason. In this case new bridge\ntransaction would revert.\nNote: If, when bridging an unbridged token and decimals are unknown,\nthe call will revert to prevent mismatched decimals. Only those ERC20s,\nwith a decimals function are supported."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token to be bridged."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_amount"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"The amount of the token to be bridged."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_recipient"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address that will receive the tokens on the other chain."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"bridgetokenwithpermit",children:"bridgeTokenWithPermit"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function bridgeTokenWithPermit(address _token, uint256 _amount, address _recipient, bytes _permitData) external payable\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Similar to ",(0,d.jsx)(n.code,{children:"bridgeToken"})," function but allows to pass additional\npermit data to do the ERC20 approval in a single transaction.\n_permit can fail silently, don't rely on this function passing as a form\nof authentication"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:'There is no need for validation at this level as the validation on pausing,\nand empty values exists on the "bridgeToken" call.'})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token to be bridged."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_amount"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"The amount of the token to be bridged."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_recipient"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address that will receive the tokens on the other chain."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_permitData"}),(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsx)(n.td,{children:"The permit data for the token, if applicable."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"completebridging",children:"completeBridging"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function completeBridging(address _nativeToken, uint256 _amount, address _recipient, uint256 _chainId, bytes _tokenMetadata) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.em,{children:["It can only be called from the Message Service. To finalize the bridging\nprocess, a user or postman needs to use the ",(0,d.jsx)(n.code,{children:"claimMessage"})," function of the\nMessage Service to trigger the transaction."]})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_nativeToken"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token on its native chain."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_amount"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"The amount of the token to be received."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_recipient"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address that will receive the tokens."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_chainId"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"The token's origin layer chaindId"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_tokenMetadata"}),(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsx)(n.td,{children:"Additional data used to deploy the bridged token if it   doesn't exist already."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"setmessageservice",children:"setMessageService"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function setMessageService(address _messageService) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Change the address of the Message Service.\nSET_MESSAGE_SERVICE_ROLE is required to execute."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_messageService"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the new Message Service."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"confirmdeployment",children:"confirmDeployment"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function confirmDeployment(address[] _tokens) external payable\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Change the status to DEPLOYED to the tokens passed in parameter\nWill call the method setDeployed on the other chain using the message Service"})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_tokens"}),(0,d.jsx)(n.td,{children:"address[]"}),(0,d.jsx)(n.td,{children:"Array of bridged tokens that have been deployed."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"setdeployed",children:"setDeployed"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function setDeployed(address[] _nativeTokens) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.em,{children:["Change the status of tokens to DEPLOYED. New bridge transaction will not\ncontain token metadata, which save gas.\nCan only be called from the Message Service. A user or postman needs to use\nthe ",(0,d.jsx)(n.code,{children:"claimMessage"})," function of the Message Service to trigger the transaction."]})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_nativeTokens"}),(0,d.jsx)(n.td,{children:"address[]"}),(0,d.jsx)(n.td,{children:"Array of native tokens for which the DEPLOYED status must be set."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"setremotetokenbridge",children:"setRemoteTokenBridge"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function setRemoteTokenBridge(address _remoteTokenBridge) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Sets the address of the remote token bridge. Can only be called once.\nSET_REMOTE_TOKENBRIDGE_ROLE is required to execute."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_remoteTokenBridge"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the remote token bridge to be set."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"deploybridgedtoken",children:"deployBridgedToken"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function deployBridgedToken(address _nativeToken, bytes _tokenMetadata, uint256 _chainId) internal returns (address bridgedTokenAddress)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Deploy a new EC20 contract for bridged token using a beacon proxy pattern.\nTo adapt to future requirements, Linea can update the implementation of\nall (existing and future) contracts by updating the beacon. This update is\nsubject to a delay by a time lock.\nContracts are deployed using CREATE2 so deployment address is deterministic."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_nativeToken"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the native token on the source chain."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_tokenMetadata"}),(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsx)(n.td,{children:"The encoded metadata for the token."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_chainId"}),(0,d.jsx)(n.td,{children:"uint256"}),(0,d.jsx)(n.td,{children:"The chain id on which the token will be deployed, used to calculate the salt"})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"return-values",children:"Return Values"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"bridgedTokenAddress"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the newly deployed BridgedToken contract."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"setreserved",children:"setReserved"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function setReserved(address _token) external\n"})}),"\n",(0,d.jsx)(n.p,{children:"Make sure that _token is native to the current chain\nwhere you are calling this function from"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Linea can reserve tokens. In this case, the token cannot be bridged.\nLinea can only reserve tokens that have not been bridged before.\nSET_RESERVED_TOKEN_ROLE is required to execute."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token to be set as reserved."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"removereserved",children:"removeReserved"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function removeReserved(address _token) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Removes a token from the reserved list.\nREMOVE_RESERVED_TOKEN_ROLE is required to execute."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token to be removed from the reserved list."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"setcustomcontract",children:"setCustomContract"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function setCustomContract(address _nativeToken, address _targetContract) external\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Linea can set a custom ERC20 contract for specific ERC20.\nFor security purpose, Linea can only call this function if the token has\nnot been bridged yet.\nSET_CUSTOM_CONTRACT_ROLE is required to execute."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-14",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_nativeToken"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the token on the source chain."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_targetContract"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the custom contract."})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"_safename",children:"_safeName"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function _safeName(address _token) internal view returns (string tokenName)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Provides a safe ERC20.name version which returns 'NO_NAME' as fallback string."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-15",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the ERC-20 token contract"})]})})]}),"\n",(0,d.jsx)(n.h4,{id:"return-values-1",children:"Return Values"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"tokenName"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Returns the string of the token name."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"_safesymbol",children:"_safeSymbol"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function _safeSymbol(address _token) internal view returns (string symbol)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Provides a safe ERC20.symbol version which returns 'NO_SYMBOL' as fallback string"})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-16",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the ERC-20 token contract"})]})})]}),"\n",(0,d.jsx)(n.h4,{id:"return-values-2",children:"Return Values"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"symbol"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"Returns the string of the symbol."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"_safedecimals",children:"_safeDecimals"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function _safeDecimals(address _token) internal view returns (uint8)\n"})}),"\n",(0,d.jsx)(n.p,{children:"Provides a safe ERC20.decimals version which reverts when decimals are unknown\nNote Tokens with (decimals > 255) are not supported"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-17",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"The address of the ERC-20 token contract"})]})})]}),"\n",(0,d.jsx)(n.h4,{id:"return-values-3",children:"Return Values"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"[0]"}),(0,d.jsx)(n.td,{children:"uint8"}),(0,d.jsx)(n.td,{children:"Returns the token's decimals value."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"_returndatatostring",children:"_returnDataToString"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function _returnDataToString(bytes _data) internal pure returns (string decodedString)\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.em,{children:"Converts returned data to string. Returns 'NOT_VALID_ENCODING' as fallback value."})}),"\n",(0,d.jsx)(n.h4,{id:"parameters-18",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_data"}),(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsx)(n.td,{children:"returned data."})]})})]}),"\n",(0,d.jsx)(n.h4,{id:"return-values-4",children:"Return Values"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsx)(n.tbody,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"decodedString"}),(0,d.jsx)(n.td,{children:"string"}),(0,d.jsx)(n.td,{children:"The decoded string data."})]})})]}),"\n",(0,d.jsx)(n.h3,{id:"_permit",children:"_permit"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-solidity",children:"function _permit(address _token, bytes _permitData) internal\n"})}),"\n",(0,d.jsx)(n.p,{children:"Call the token permit method of extended ERC20\nOnly support tokens implementing ERC-2612"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-19",children:"Parameters"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Name"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_token"}),(0,d.jsx)(n.td,{children:"address"}),(0,d.jsx)(n.td,{children:"ERC20 token address"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"_permitData"}),(0,d.jsx)(n.td,{children:"bytes"}),(0,d.jsxs)(n.td,{children:["Raw data of the call ",(0,d.jsx)(n.code,{children:"permit"})," of the token"]})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}}}]);