"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[3779],{14413:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"api/linea-smart-contracts/messageservice/lib/sparsemerkletreeverifier","title":"SparseMerkleTreeVerifier","description":"SafeCastOverflowedUintDowncast","source":"@site/docs/api/linea-smart-contracts/messageservice/lib/sparsemerkletreeverifier.mdx","sourceDirName":"api/linea-smart-contracts/messageservice/lib","slug":"/api/linea-smart-contracts/messageservice/lib/sparsemerkletreeverifier","permalink":"/web3-feedback/api/linea-smart-contracts/messageservice/lib/sparsemerkletreeverifier","draft":false,"unlisted":false,"editUrl":"https://github.com/Consensys/doc.linea/tree/main/docs/api/linea-smart-contracts/messageservice/lib/sparsemerkletreeverifier.mdx","tags":[],"version":"current","lastUpdatedBy":"oliver renwick","lastUpdatedAt":1742484500000,"frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"RateLimiter","permalink":"/web3-feedback/api/linea-smart-contracts/messageservice/lib/ratelimiter"},"next":{"title":"TimeLock","permalink":"/web3-feedback/api/linea-smart-contracts/messageservice/lib/timelock"}}');var n=s(74848),i=s(28453);const a={},l="SparseMerkleTreeVerifier",d={},c=[{value:"SafeCastOverflowedUintDowncast",id:"safecastoverfloweduintdowncast",level:3},{value:"LeafIndexOutOfBounds",id:"leafindexoutofbounds",level:3},{value:"_verifyMerkleProof",id:"_verifymerkleproof",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Return Values",id:"return-values",level:4},{value:"safeCastToUint32",id:"safecasttouint32",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Return Values",id:"return-values-1",level:4}];function o(e){const r={code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"sparsemerkletreeverifier",children:(0,n.jsx)(r.code,{children:"SparseMerkleTreeVerifier"})})}),"\n",(0,n.jsx)(r.h3,{id:"safecastoverfloweduintdowncast",children:"SafeCastOverflowedUintDowncast"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-solidity",children:"error SafeCastOverflowedUintDowncast(uint8 bits, uint256 value)\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsxs)(r.em,{children:["Value doesn't fit in a uint of ",(0,n.jsx)(r.code,{children:"bits"})," size.\nThis is based on OpenZeppelin's SafeCast library."]})}),"\n",(0,n.jsx)(r.h3,{id:"leafindexoutofbounds",children:"LeafIndexOutOfBounds"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-solidity",children:"error LeafIndexOutOfBounds(uint32 leafIndex, uint32 maxAllowedIndex)\n"})}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.em,{children:"Custom error for when the leaf index is out of bounds."})}),"\n",(0,n.jsx)(r.h3,{id:"_verifymerkleproof",children:"_verifyMerkleProof"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-solidity",children:"function _verifyMerkleProof(bytes32 _leafHash, bytes32[] _proof, uint32 _leafIndex, bytes32 _root) internal pure returns (bool proofIsValid)\n"})}),"\n",(0,n.jsx)(r.p,{children:"Verify merkle proof"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.em,{children:"The depth of the tree is expected to be validated elsewhere beforehand."})}),"\n",(0,n.jsx)(r.h4,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"_leafHash"}),(0,n.jsx)(r.td,{children:"bytes32"}),(0,n.jsx)(r.td,{children:"Leaf hash."})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"_proof"}),(0,n.jsx)(r.td,{children:"bytes32[]"}),(0,n.jsx)(r.td,{children:"Sparse merkle tree proof."})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"_leafIndex"}),(0,n.jsx)(r.td,{children:"uint32"}),(0,n.jsx)(r.td,{children:"Index of the leaf."})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"_root"}),(0,n.jsx)(r.td,{children:"bytes32"}),(0,n.jsx)(r.td,{children:"Merkle root."})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"return-values",children:"Return Values"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"proofIsValid"}),(0,n.jsx)(r.td,{children:"bool"}),(0,n.jsx)(r.td,{children:"Returns if the proof is valid or not."})]})})]}),"\n",(0,n.jsx)(r.h3,{id:"safecasttouint32",children:"safeCastToUint32"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-solidity",children:"function safeCastToUint32(uint256 _value) internal pure returns (uint32 castUint32)\n"})}),"\n",(0,n.jsx)(r.p,{children:"Tries to safely cast to uint32."}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.em,{children:"This is based on OpenZeppelin's SafeCast library."})}),"\n",(0,n.jsx)(r.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"_value"}),(0,n.jsx)(r.td,{children:"uint256"}),(0,n.jsx)(r.td,{children:"The value being cast to uint32."})]})})]}),"\n",(0,n.jsx)(r.h4,{id:"return-values-1",children:"Return Values"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Name"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsx)(r.tbody,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"castUint32"}),(0,n.jsx)(r.td,{children:"uint32"}),(0,n.jsx)(r.td,{children:"Returns a uint32 safely cast."})]})})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>l});var t=s(96540);const n={},i=t.createContext(n);function a(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);