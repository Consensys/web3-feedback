"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[8401],{19561:(e,t,a)=>{a.d(t,{A:()=>A});var s=a(96540),n=a(34164),o=a(86682),i=a(17081),r=a(81130),c=a(15833),l=a(55730),d=a(91386),h=a(27521),u=a(91990),m=a(38294),b=a(57519),f=a(28467);const p={docItemContainer:"docItemContainer_c0TR",docItemCol:"docItemCol_z5aJ",feedbackContainer:"feedbackContainer_C8Ks",feedbackPrompt:"feedbackPrompt_UaEh",feedbackButtons:"feedbackButtons_X7j4",feedbackButton:"feedbackButton_ht6A",thumbsUp:"thumbsUp_trTO",thumbsDown:"thumbsDown_spKh",thankYouMessage:"thankYouMessage_dh1N",fadeIn:"fadeIn_JNKh",feedbackSuccess:"feedbackSuccess_mUak",veraxLinks:"veraxLinks_Y7nt",veraxLink:"veraxLink_e1xh",loadingIndicator:"loadingIndicator_oi1c",errorMessage:"errorMessage_ZFST",feedbackHeader:"feedbackHeader_jIPN",tooltipContainer:"tooltipContainer_xRqa",tooltipTrigger:"tooltipTrigger_iihd",infoIcon:"infoIcon_Z2mR",whatIsThis:"whatIsThis_I1X8",tooltipContent:"tooltipContent_rMJZ","fade-in":"fade-in_eJfq"};var x=a(56347),g=a(52362),k=a(74848);function j(){return(0,x.zy)().pathname.includes("/tooling")?(0,k.jsx)("div",{style:{marginTop:"2rem"},children:(0,k.jsxs)(g.A,{type:"info",title:"Want to be featured here?",children:["Have you built a tool for Linea? Contribute to the docs to add it here! See our"," ",(0,k.jsxs)("a",{href:"https://github.com/Consensys/doc.linea?tab=readme-ov-file#contribute",children:[" ","guide to contributing"]}),"."]})}):null}function v(){return(0,x.zy)().pathname.includes("/api/linea-smart-contracts")?(0,k.jsx)("div",{style:{marginTop:"2rem"},children:(0,k.jsxs)(g.A,{type:"warning",title:"Contributions not accepted",children:["These reference pages are automatically generated based on Linea's"," ",(0,k.jsx)("a",{href:"https://github.com/Consensys/linea-monorepo/tree/main/contracts/src",children:"smart contracts"}),". To ensure they accurately match the deployed smart contracts, we cannot accept any contributions that edit these pages."]})}):null}var y=a(8532),I=a(73622),w=a(54433),C=a(16954);const _="0x598440d1c9B3302ECaD9Cb3945717Ef2EC632746",N="0xb3cb018b837f70fa9cbb59bcfc59049fb529151399345845bae3d380b81c4120",M=["function attest(tuple(bytes32 schemaId, uint64 expirationDate, bytes subject, bytes attestationData) attestationPayload, bytes[] validationPayload) public payable"],T=e=>{let{text:t}=e;const[a,n]=(0,s.useState)(!1);return(0,k.jsxs)("div",{className:p.tooltipContainer,children:[(0,k.jsxs)("div",{className:p.tooltipTrigger,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!a),children:[(0,k.jsx)("span",{className:p.infoIcon,children:"\u24d8"}),(0,k.jsx)("span",{className:p.whatIsThis,children:"What is this?"})]}),a&&(0,k.jsx)("div",{className:p.tooltipContent,children:t})]})},S=()=>{const{colorMode:e}=(0,y.G)(),[t,a]=(0,s.useState)(e),[n,o]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),[d,h]=(0,s.useState)(""),[u,m]=(0,s.useState)(null),[b,f]=(0,s.useState)(null),{metaMaskAccount:x,metaMaskWalletIdConnectHandler:g,metaMaskProvider:j,sdk:v}=(0,s.useContext)(C.y);(0,s.useEffect)((()=>{a(e)}),[e]),(0,s.useEffect)((()=>{"undefined"!=typeof window&&h(window.location.href)}),[]);const S=async e=>{if(console.log(`Preparing to submit ${e?"positive":"negative"} feedback for ${d}`),!x)return console.log("No wallet connected. Opening MetaMask..."),void g();r(!0),l(null),m(null),f(null);try{console.log("Connected wallet address:",x);const a=j;if(!a)throw new Error("MetaMask provider not available");console.log("Getting chain ID...");const s=await a.request({method:"eth_chainId"}),n=parseInt(s,16);if(console.log("Current chain ID:",n),59144!==n){console.log("Switching to Linea Mainnet...");try{await a.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xe708"}]})}catch(t){if(4902!==t.code)throw t;await a.request({method:"wallet_addEthereumChain",params:[{chainId:"0xe708",chainName:"Linea Mainnet",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://rpc.linea.build"],blockExplorerUrls:["https://lineascan.build/"]}]})}}const i=new I.KA(M),r=new w.y,c=r.encode(["bool","string","address"],[e,d,x]),l=r.encode(["address"],[x]),h={schemaId:N,expirationDate:0,subject:l,attestationData:c},u=i.encodeFunctionData("attest",[h,[]]);console.log("Getting gas price...");const b=await a.request({method:"eth_gasPrice"}),p=parseInt(b,16),g=Math.floor(1.2*p).toString(16);console.log("Gas price:",b,"With premium:","0x"+g),console.log("Estimating gas...");const k=await a.request({method:"eth_estimateGas",params:[{to:_,from:x,data:u}]}),v=parseInt(k,16),y=Math.floor(1.2*v).toString(16);console.log("Gas estimate:",k,"With buffer:","0x"+y);const C={chainId:n,address:x,portalAddress:_,schemaId:N,gasPrice:parseInt(b,16),gasPriceWithPremium:parseInt("0x"+g,16),gasEstimate:parseInt(k,16),gasEstimateWithBuffer:parseInt("0x"+y,16)};console.log("Debug data:",C),m(C);const T={to:_,from:x,data:u,chainId:"0xe708",gasPrice:"0x"+g,gas:"0x"+y};console.log("Transaction parameters:",T),console.log("Sending transaction...");const S=await a.request({method:"eth_sendTransaction",params:[T]});console.log("Transaction sent! Hash:",S),f(S),o(!0)}catch(c){console.error("Error submitting feedback:",c),l(`Failed to submit feedback: ${c.message}`)}finally{r(!1)}};return(0,k.jsxs)("div",{className:p.feedbackContainer,children:[(0,k.jsx)("div",{className:p.feedbackPrompt,children:n?(0,k.jsxs)("div",{className:p.feedbackSuccess,children:[(0,k.jsx)("div",{className:p.thankYouMessage,children:"Thank you for your feedback!"}),(0,k.jsxs)("div",{className:p.veraxLinks,children:[(0,k.jsx)("a",{href:"https://explorer.ver.ax/linea/schemas/0xb3cb018b837f70fa9cbb59bcfc59049fb529151399345845bae3d380b81c4120",target:"_blank",rel:"noopener noreferrer",className:p.veraxLink,children:"View all feedback on the Verax explorer"}),b&&(0,k.jsx)("a",{href:`https://lineascan.build/tx/${b}`,target:"_blank",rel:"noopener noreferrer",className:p.veraxLink,children:"View your transaction on LineaScan"})]})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:p.feedbackHeader,children:(0,k.jsx)("span",{children:"Was this page helpful?"})}),(0,k.jsxs)("div",{className:p.feedbackButtons,children:[(0,k.jsx)("button",{className:`${p.feedbackButton} ${p.thumbsUp}`,onClick:()=>S(!0),disabled:i,"aria-label":"Thumbs up",children:"\ud83d\udc4d"}),(0,k.jsx)("button",{className:`${p.feedbackButton} ${p.thumbsDown}`,onClick:()=>S(!1),disabled:i,"aria-label":"Thumbs down",children:"\ud83d\udc4e"})]}),(0,k.jsx)(T,{text:"This is a trial feedback system that uses Verax to record your feedback as onchain attestations on Linea Mainnet. When you vote, submit a transaction in your wallet."})]})}),i&&(0,k.jsx)("div",{className:p.loadingIndicator,children:"Submitting feedback..."}),c&&(0,k.jsxs)("div",{className:p.errorMessage,children:[c,!x&&(0,k.jsx)("button",{onClick:g,className:p.connectButton,style:{marginLeft:"10px",padding:"4px 8px",fontSize:"0.8rem"},children:"Connect MetaMask"})]}),x&&(0,k.jsxs)("div",{className:p.walletInfo,style:{fontSize:"0.7rem",marginTop:"0.5rem",color:"var(--ifm-color-emphasis-600)"},children:["Connected: ",x.substring(0,6),"...",x.substring(38)]}),u&&(0,k.jsx)("div",{className:p.debugInfo,style:{fontSize:"0.8rem",marginTop:"1rem",color:"var(--ifm-color-emphasis-600)",textAlign:"left"},children:(0,k.jsxs)("details",{children:[(0,k.jsx)("summary",{children:"Debug Information"}),(0,k.jsx)("pre",{children:JSON.stringify(u,null,2)})]})})]})};function A(e){let{children:t}=e;const a=function(){const{frontMatter:e,toc:t}=(0,i.u)(),a=(0,o.l)(),s=e.hide_table_of_contents,n=!s&&t.length>0;return{hidden:s,mobile:n?(0,k.jsx)(h.A,{}):void 0,desktop:!n||"desktop"!==a&&"ssr"!==a?void 0:(0,k.jsx)(u.A,{})}}(),{metadata:s}=(0,i.u)();return(0,k.jsxs)("div",{className:"row",children:[(0,k.jsxs)("div",{className:(0,n.A)("col",!a.hidden&&p.docItemCol),children:[(0,k.jsx)(f.A,{metadata:s}),(0,k.jsx)(c.A,{}),(0,k.jsxs)("div",{className:p.docItemContainer,children:[(0,k.jsxs)("article",{children:[(0,k.jsx)(b.A,{}),(0,k.jsx)(l.A,{}),a.mobile,(0,k.jsx)(m.A,{children:t}),(0,k.jsx)(j,{}),(0,k.jsx)(v,{}),(0,k.jsx)(S,{}),(0,k.jsx)(d.A,{})]}),(0,k.jsx)(r.A,{})]})]}),a.desktop&&(0,k.jsx)("div",{className:"col col--3",children:a.desktop})]})}},57660:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});a(96540);var s=a(55920),n=a(27143),o=a(74848);const i=function(e){const{content:t}=e,{metadata:a}=t,{image:i}=a,r=i?`${i}`:void 0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.A,{children:r&&(0,o.jsx)("meta",{property:"og:image",content:r})}),(0,o.jsx)(s.A,{...e})]})}}}]);