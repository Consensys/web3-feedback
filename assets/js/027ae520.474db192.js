"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[909],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>d});var s=n(96540);const r={},i=s.createContext(r);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:t},e.children)}},61393:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"get-started/tooling/permanent-data/irys/irys-querying","title":"Query Irys transactions","description":"Querying data on Irys.","source":"@site/docs/get-started/tooling/permanent-data/irys/irys-querying.mdx","sourceDirName":"get-started/tooling/permanent-data/irys","slug":"/get-started/tooling/permanent-data/irys/irys-querying","permalink":"/web3-feedback/get-started/tooling/permanent-data/irys/irys-querying","draft":false,"unlisted":false,"editUrl":"https://github.com/Consensys/doc.linea/tree/main/docs/get-started/tooling/permanent-data/irys/irys-querying.mdx","tags":[],"version":"current","lastUpdatedBy":"Joel Willmore","lastUpdatedAt":1746005489000,"frontMatter":{"title":"Query Irys transactions","image":"/img/socialCards/query-irys-transactions.jpg","description":"Querying data on Irys."},"sidebar":"getStartedSidebar","previous":{"title":"Irys quickstart","permalink":"/web3-feedback/get-started/tooling/permanent-data/irys/irys-quickstart"},"next":{"title":"Security","permalink":"/web3-feedback/get-started/tooling/privacy/"}}');var r=n(74848),i=n(28453);const a={title:"Query Irys transactions",image:"/img/socialCards/query-irys-transactions.jpg",description:"Querying data on Irys."},d=void 0,l={},c=[{value:"GraphQL clients",id:"graphql-clients",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"Query arguments",id:"query-arguments",level:2},{value:"Results fields",id:"results-fields",level:2},{value:"Sample Queries",id:"sample-queries",level:2},{value:"Transaction IDs",id:"transaction-ids",level:3},{value:"Timestamps",id:"timestamps",level:3},{value:"Owners",id:"owners",level:3},{value:"Tags",id:"tags",level:3},{value:"Limiting Results",id:"limiting-results",level:3},{value:"Pagination",id:"pagination",level:3},{value:"Sorting",id:"sorting",level:3}];function o(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Irys transaction metadata can be queried using GraphQL. You can use it to search\nfor transactions by:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Signer's address"}),"\n",(0,r.jsx)(t.li,{children:"Payment token"}),"\n",(0,r.jsx)(t.li,{children:"Metadata tags"}),"\n",(0,r.jsx)(t.li,{children:"Timestamps"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"graphql-clients",children:"GraphQL clients"}),"\n",(0,r.jsxs)(t.p,{children:["You can query using an HTTP library like ",(0,r.jsx)(t.code,{children:"fetch"})," or ",(0,r.jsx)(t.code,{children:"axios"}),", or use specialized\nclients like ",(0,r.jsx)(t.a,{href:"https://www.apollographql.com/",children:"Apollo Client"})," or ",(0,r.jsx)(t.a,{href:"https://formidable.com/open-source/urql/",children:"urql"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.a,{href:"https://uploader.irys.xyz/graphql",children:"https://uploader.irys.xyz/graphql"})}),"\n",(0,r.jsx)(t.h2,{id:"query-arguments",children:"Query arguments"}),"\n",(0,r.jsx)(t.p,{children:"Any of the following query arguments can be used as search parameters:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Field"}),(0,r.jsx)("th",{children:"Description"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"ids"})}),(0,r.jsx)("td",{children:"An array of transaction IDs passed as strings. Values are ORed together. Matching results will include transactions that have any of the supplied IDs."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"owner"})}),(0,r.jsxs)("td",{children:["The address used when posting the transaction. Can be a native address from ",(0,r.jsx)("a",{href:"https://docs.irys.xyz/build/d/features/supported-tokens",children:"any of the chains supported by Irys"}),". Note that in results fields, this is referred to as ",(0,r.jsx)(t.code,{children:"address"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"token"})}),(0,r.jsxs)("td",{children:["The ",(0,r.jsx)("a",{href:"https://docs.irys.xyz/build/d/features/supported-tokens",children:"token"})," used to pay for the transaction."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"tags"})}),(0,r.jsx)("td",{children:"An array of tag name/value pairs passed as JSON objects."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"results-fields",children:"Results fields"}),"\n",(0,r.jsx)(t.p,{children:"When building a query, any of the following values be included in your results:"}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Field"}),(0,r.jsx)("th",{children:"Description"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"id"})}),(0,r.jsx)("td",{children:"The transaction ID."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"address"})}),(0,r.jsxs)("td",{children:["The address used when posting the transaction. Can be a native address from any of the chains supported by Irys. Note that in query arguments, this is referred to as ",(0,r.jsx)(t.code,{children:"owner"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"token"})}),(0,r.jsx)("td",{children:"The token used to pay for the transaction."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"receipt { \n  deadlineHeight \n  signature \n  version\n}\n"})})}),(0,r.jsxs)("td",{children:["An optional receipt, only exists if a user requested one at upload.\n",(0,r.jsx)(t.code,{children:"deadlineHeight"}),": The block number by which the transaction must be finalized.\n",(0,r.jsx)(t.code,{children:"signature"}),": A signed deep hash of the JSON receipt."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"tags { \n  name \n  value\n}\n"})})}),(0,r.jsx)("td",{children:"An array of tags supplied as name/value pairs. Exists if the user added them at upload."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(t.code,{children:"timestamp"})}),(0,r.jsx)("td",{children:"The timestamp, accurate to the millisecond of when the transaction was posted. This value is the same as the receipt timestamp."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"sample-queries",children:"Sample Queries"}),"\n",(0,r.jsxs)(t.p,{children:["Queries return transaction metadata. To then retrieve data, use the returned\ntransaction ID and download the data from the Irys gateway using a URL formed\nas follows: ",(0,r.jsx)(t.code,{children:"https://gateway.irys.xyz/:transactionId"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"transaction-ids",children:"Transaction IDs"}),"\n",(0,r.jsx)(t.p,{children:"Search by transaction IDs."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getByIds {\n\ttransactions(ids: ["--52WQHJIJod_rni8pkl1Vxt9MFGoXZAm8SC7ex6C1o", "--52THRWpX_RJzGcNXmtQ2DSP37d1e1VQ4YmvbY5ZXo"]) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\ttags {\n\t\t\t\t\tname\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"timestamps",children:"Timestamps"}),"\n",(0,r.jsx)(t.p,{children:"Search by timestamps:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:"query getByTimestamp {\n\ttransactions(timestamp: { from: 1688144401000, to: 1688317201000 }) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n}\n"})}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["Irys timestamps are accurate to the millisecond, so you need to provide a\ntimestamp in millisecond format when querying. You can convert from\nhuman-readable time to UNIX timestamp using websites like ",(0,r.jsx)(t.a,{href:"https://www.epoch101.com/",children:"Epoch101"}),",\nbe sure to convert in ",(0,r.jsx)(t.strong,{children:"millisecond"})," format, not ",(0,r.jsx)(t.strong,{children:"second"}),"."]})}),"\n",(0,r.jsx)(t.h3,{id:"owners",children:"Owners"}),"\n",(0,r.jsx)(t.p,{children:"Search for transactions matching the wallet address used when posting the\ntransaction:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getByOwner {\n\ttransactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE", "0xaC568a981B1370B2e1bAA8cE30BD5AC9E28C572D"]) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\taddress\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"tags",children:"Tags"}),"\n",(0,r.jsxs)(t.p,{children:["Search for transactions matching ",(0,r.jsx)(t.a,{href:"https://docs.irys.xyz/build/d/features/tags",children:"tag"}),"\nname/value pairs:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getAllPNGs {\n\ttransactions(tags: [{ name: "Content-Type", values: ["image/png"] }]) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\taddress\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Search for transactions matching the tag with name ",(0,r.jsx)(t.strong,{children:"Content-Type"})," and the\nvalues of ",(0,r.jsx)(t.strong,{children:"image/png"})," OR ",(0,r.jsx)(t.strong,{children:"image/jpg"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getTagsWithOR {\n\ttransactions(tags: [{ name: "Content-Type", values: ["image/png", "image/jpg"] }]) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\ttags {\n\t\t\t\t\tname\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Search for transactions matching the tag with name ",(0,r.jsx)(t.strong,{children:"Content-Type"})," and the\nvalues of ",(0,r.jsx)(t.strong,{children:"image/png"})," AND ",(0,r.jsx)(t.strong,{children:"image/jpg"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getTagsWithAnd {\n\ttransactions(\n\t\ttags: [{ name: "Content-Type", values: ["image/jpg"] }, { name: "Content-Type", values: ["image/png"] }]\n\t) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\ttags {\n\t\t\t\t\tname\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"limiting-results",children:"Limiting Results"}),"\n",(0,r.jsxs)(t.p,{children:["Limit the number of results returned by including the ",(0,r.jsx)(t.code,{children:"limit"})," parameter:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getAllPNGs {\n\ttransactions(limit: 10, tags: [{ name: "Content-Type", values: ["image/png"] }]) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\taddress\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"pagination",children:"Pagination"}),"\n",(0,r.jsx)(t.p,{children:"You can request a maximum of 100 results returned from each query, to obtain\nadditional results use pagination."}),"\n",(0,r.jsx)(t.p,{children:"When using pagination you:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Retrieve the ",(0,r.jsx)(t.code,{children:"cursor"})," field. This acts like a bookmark in the search results\nthat you can then return to."]}),"\n",(0,r.jsxs)(t.li,{children:["Use saved ",(0,r.jsx)(t.code,{children:"cursor"})," value to obtain subsequent search results."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The following query returns 10 transactions tagged ",(0,r.jsx)(t.code,{children:"image/png"})," occurring after\nthe cursor with value: ",(0,r.jsx)(t.code,{children:"LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw"}),".\nTo obtain the next 10 transactions, use the final ",(0,r.jsx)(t.code,{children:"cursor"})," value returned from\nthis query as the value of the ",(0,r.jsx)(t.code,{children:"after"})," parameter in the following query."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getPNGs {\n\ttransactions(\n\t\tlimit: 10\n\t\ttags: [{ name: "Content-Type", values: ["image/png"] }]\n\t\tafter: "LS02d1NsM3R6aUprd3dKUzVjN1FXaWg5aUxsbXh5dVJJbGlydHJtNlpPbw"\n\t) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t}\n\t\t\tcursor\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"sorting",children:"Sorting"}),"\n",(0,r.jsxs)(t.p,{children:["You can sort results by timestamp in either ascending or descending order using\nthe ",(0,r.jsx)(t.code,{children:"order"})," field."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getAllByOwnerAsc {\n\ttransactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE"], order: ASC) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\taddress\n\t\t\t}\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-graphql",children:'query getAllByOwnerDesc {\n\ttransactions(owners: ["0xBcb812C6e26F4F0F78Bd7B6222461FF24F2942AE"], order: DESC) {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\taddress\n\t\t\t}\n\t\t}\n\t}\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);