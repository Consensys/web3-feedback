"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[5529],{28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var r=n(96540);const a={},i=r.createContext(a);function t(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:s},e.children)}},38056:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api/linea-smart-contracts/interfaces/l2/il2messagemanager","title":"IL2MessageManager","description":"RollingHashUpdated","source":"@site/docs/api/linea-smart-contracts/interfaces/l2/il2messagemanager.mdx","sourceDirName":"api/linea-smart-contracts/interfaces/l2","slug":"/api/linea-smart-contracts/interfaces/l2/il2messagemanager","permalink":"/web3-feedback/api/linea-smart-contracts/interfaces/l2/il2messagemanager","draft":false,"unlisted":false,"editUrl":"https://github.com/Consensys/doc.linea/tree/main/docs/api/linea-smart-contracts/interfaces/l2/il2messagemanager.mdx","tags":[],"version":"current","lastUpdatedBy":"Joel Willmore","lastUpdatedAt":1747828420000,"frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"IZkEvmV2","permalink":"/web3-feedback/api/linea-smart-contracts/interfaces/l1/izkevmv2"},"next":{"title":"IL2MessageManagerV1","permalink":"/web3-feedback/api/linea-smart-contracts/interfaces/l2/il2messagemanagerv1"}}');var a=n(74848),i=n(28453);const t={},l="IL2MessageManager",h={},d=[{value:"RollingHashUpdated",id:"rollinghashupdated",level:3},{value:"Parameters",id:"parameters",level:4},{value:"ServiceVersionMigrated",id:"serviceversionmigrated",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"MessageHashesListLengthIsZero",id:"messagehasheslistlengthiszero",level:3},{value:"L1MessageNumberSynchronizationWrong",id:"l1messagenumbersynchronizationwrong",level:3},{value:"L1RollingHashSynchronizationWrong",id:"l1rollinghashsynchronizationwrong",level:3},{value:"FinalRollingHashIsZero",id:"finalrollinghashiszero",level:3},{value:"anchorL1L2MessageHashes",id:"anchorl1l2messagehashes",level:3},{value:"Parameters",id:"parameters-2",level:4}];function c(e){const s={code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"il2messagemanager",children:(0,a.jsx)(s.code,{children:"IL2MessageManager"})})}),"\n",(0,a.jsx)(s.h3,{id:"rollinghashupdated",children:"RollingHashUpdated"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"event RollingHashUpdated(uint256 messageNumber, bytes32 rollingHash)\n"})}),"\n",(0,a.jsx)(s.p,{children:"Emitted after all messages are anchored on L2 and the latest message index and rolling hash stored."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"NB: This event is used to provide data to the rollup. The last messageNumber and rollingHash,\nemitted in a rollup will be used in the public input for validating the L1->L2 messaging state transition."})}),"\n",(0,a.jsx)(s.h4,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Name"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"messageNumber"}),(0,a.jsx)(s.td,{children:"uint256"}),(0,a.jsx)(s.td,{children:"The indexed unique L1 computed indexed message number for the message."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"rollingHash"}),(0,a.jsx)(s.td,{children:"bytes32"}),(0,a.jsx)(s.td,{children:"The indexed L1 rolling hash computed for the current message number."})]})]})]}),"\n",(0,a.jsx)(s.h3,{id:"serviceversionmigrated",children:"ServiceVersionMigrated"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"event ServiceVersionMigrated(uint256 version)\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Emitted when the service switches over to a new version.\nThis is currently not in use, but left for existing consumers."})}),"\n",(0,a.jsx)(s.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Name"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsx)(s.tbody,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"version"}),(0,a.jsx)(s.td,{children:"uint256"}),(0,a.jsx)(s.td,{children:"The indexed version."})]})})]}),"\n",(0,a.jsx)(s.h3,{id:"messagehasheslistlengthiszero",children:"MessageHashesListLengthIsZero"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"error MessageHashesListLengthIsZero()\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Reverts when the message hashes array length is zero."})}),"\n",(0,a.jsx)(s.h3,{id:"l1messagenumbersynchronizationwrong",children:"L1MessageNumberSynchronizationWrong"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"error L1MessageNumberSynchronizationWrong(uint256 expected, uint256 found)\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Reverts when message number synchronization is mismatched."})}),"\n",(0,a.jsx)(s.h3,{id:"l1rollinghashsynchronizationwrong",children:"L1RollingHashSynchronizationWrong"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"error L1RollingHashSynchronizationWrong(bytes32 expected, bytes32 found)\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Reverts when rolling hash synchronization is mismatched."})}),"\n",(0,a.jsx)(s.h3,{id:"finalrollinghashiszero",children:"FinalRollingHashIsZero"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"error FinalRollingHashIsZero()\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Reverts when final rolling hash is zero hash."})}),"\n",(0,a.jsx)(s.h3,{id:"anchorl1l2messagehashes",children:"anchorL1L2MessageHashes"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-solidity",children:"function anchorL1L2MessageHashes(bytes32[] _messageHashes, uint256 _startingMessageNumber, uint256 _finalMessageNumber, bytes32 _finalRollingHash) external\n"})}),"\n",(0,a.jsx)(s.p,{children:"Add cross-chain L1->L2 message hashes in storage."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Only address that has the role 'L1_L2_MESSAGE_SETTER_ROLE' are allowed to call this function.\nNB: In the unlikely event of a duplicate anchoring, the lastAnchoredL1MessageNumber MUST NOT be incremented.\nand the rolling hash not calculated, else synchronisation will break.\nIf starting number is zero, an underflow error is expected."})}),"\n",(0,a.jsx)(s.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Name"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"_messageHashes"}),(0,a.jsx)(s.td,{children:"bytes32[]"}),(0,a.jsx)(s.td,{children:"New message hashes to anchor on L2."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"_startingMessageNumber"}),(0,a.jsx)(s.td,{children:"uint256"}),(0,a.jsx)(s.td,{children:"The expected L1 message number to start when anchoring."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"_finalMessageNumber"}),(0,a.jsx)(s.td,{children:"uint256"}),(0,a.jsx)(s.td,{children:"The expected L1 message number to end on when anchoring."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"_finalRollingHash"}),(0,a.jsx)(s.td,{children:"bytes32"}),(0,a.jsx)(s.td,{children:"The expected L1 rolling hash to end on when anchoring."})]})]})]})]})}function o(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);