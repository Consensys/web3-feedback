"use strict";(self.webpackChunkweb3_feedback=self.webpackChunkweb3_feedback||[]).push([[3540],{6650:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"technology/prover/trace-expansion","title":"Proving: Circuit building","description":"Corset","source":"@site/docs/technology/prover/trace-expansion.mdx","sourceDirName":"technology/prover","slug":"/technology/prover/trace-expansion","permalink":"/web3-feedback/technology/prover/trace-expansion","draft":false,"unlisted":false,"editUrl":"https://github.com/Consensys/doc.linea/tree/main/docs/technology/prover/trace-expansion.mdx","tags":[],"version":"current","lastUpdatedBy":"Joel Willmore","lastUpdatedAt":1747823869000,"sidebarPosition":1,"frontMatter":{"title":"Proving: Circuit building","sidebar_position":1,"image":"/img/socialCards/proving-circuit-building.jpg"},"sidebar":"technologySidebar","previous":{"title":"Proving: Circuit execution and runtime","permalink":"/web3-feedback/technology/prover/proving"},"next":{"title":"Module limits","permalink":"/web3-feedback/technology/prover/prover-limits"}}');var n=o(74848),s=o(28453);const r={title:"Proving: Circuit building",sidebar_position:1,image:"/img/socialCards/proving-circuit-building.jpg"},a=void 0,c={},d=[{value:"Corset",id:"corset",level:3},{value:"What is it?",id:"what-is-it",level:4},{value:"What does it do?",id:"what-does-it-do",level:4},{value:"How does it do it?",id:"how-does-it-do-it",level:4}];function l(e){const t={em:"em",h3:"h3",h4:"h4",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h3,{id:"corset",children:"Corset"}),"\n",(0,n.jsx)(t.h4,{id:"what-is-it",children:"What is it?"}),"\n",(0,n.jsx)(t.p,{children:"Corset is the first of two parts of the component of Linea\u2019s architecture generally referred to as \u201cthe prover\u201d."}),"\n",(0,n.jsx)(t.h4,{id:"what-does-it-do",children:"What does it do?"}),"\n",(0,n.jsx)(t.p,{children:"Corset takes the traces, expands them, and prepares them for the prover."}),"\n",(0,n.jsx)(t.h4,{id:"how-does-it-do-it",children:"How does it do it?"}),"\n",(0,n.jsx)(t.p,{children:"Corset performs its duties through two different paths:"}),"\n",(0,n.jsxs)(t.p,{children:["First, every time Linea\u2019s overall codebase and implementation of the zkEVM is updated, Corset creates a ",(0,n.jsx)(t.em,{children:"constraint system"}),". This is a term you may hear often in zk-land. A constraint, in this context, refers to a kind of test you can run on something, to make sure it\u2019s the way it\u2019s supposed to be. An entire constraint system allows you to define a whole set of rules, or checks, which must be fulfilled. Since the goal of Zero Knowledge technology is to ",(0,n.jsx)(t.em,{children:"prove"})," something, you can probably see where this is going: a constraint system allows you to, using math, prove that underlying conditions are a certain way, without revealing those underlying conditions."]}),"\n",(0,n.jsxs)(t.p,{children:["Corset\u2013which is written in Rust\u2013uses a Domain-Specific Language, or DSL, written in Lisp, to create a constraint system specifically designed for Linea\u2019s zkEVM environment. This system, once built, is compiled into the Go programming language. This constraint system, which is optimized for Linea\u2019s architecture, becomes the input for gnark, which converts it to the type of constraint system that would produce ",(0,n.jsx)(t.strong,{children:"a zk-SNARK"}),"\u2013the kind you would, you know, send to a smart contract on Ethereum mainnet to prove that everything on your L2 is the way you say it is."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Second"})," (it\u2019s OK to take a deep breath here), Corset helps process data with ",(0,n.jsx)(t.em,{children:"every block that\u2019s submitted"}),". The trace data, generated in every block, will have to go into gnark\u2019s implementation of Corset\u2019s compiled constraint system, in order to produce the final proof. And because of the way Corset, and the Lisp part of it specifically, processes trace data, Corset can prepare that trace data for gnark. This process is called \u201ctrace expansion\u201d, because it refers to taking matrices of data, and deriving certain sets of them from others\u2013so that they can be more accurately processed by gnark."]}),"\n",(0,n.jsx)(t.p,{children:"In these two modes, then\u2013once at build time, when Corset makes the constraint system and compiles it to Go, and at the runtime of every block, when Corset takes traces and expands them into a format that will work well with gnark\u2019s implementation of Corset\u2019s original constraint system, Corset is the bespoke data preparation system for gnark, which is the final executor of Linea\u2019s proving system."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>a});var i=o(96540);const n={},s=i.createContext(n);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);